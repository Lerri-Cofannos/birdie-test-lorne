(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(7),r=n.n(s),i=(n(41),n(4)),o=(n(42),n(6)),l=n.n(o),d=n(11),j=n(8),u=n.n(j);function b(){return(b=Object(d.a)(l.a.mark((function e(t,n){var c,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="/data/patientList",e.next=3,u.a.get(c).catch((function(e){console.log("Server error: ",e)}));case 3:(a=e.sent)&&200===a.status?(s=a.data,console.log("successful response from ".concat(c,": "),s),t(s),n(s[0])):a?console.log(a.data.err):console.log("Server error");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=n(1),m=a.a.createContext(void 0);function v(e){var t=e.children,n=Object(c.useState)({index:-1,id:"404",name:"waiting for patient"}),a=Object(i.a)(n,2),s=a[0],r=a[1];return Object(f.jsx)(m.Provider,{value:{patient:s,setPatient:r},children:t})}function O(){var e=Object(c.useContext)(m);if(e)return e;throw new Error("data is undefined yet")}n(62);function h(){return Object(f.jsxs)("div",{className:"Header",children:[Object(f.jsx)("img",{className:"Header-logo",src:"https://assets.website-files.com/5d80c03f1edd7bd68fcdb623/5d80c151ddf52828d3cff080_Birdie%20-%20Logo%20-%20Blue%20%2B%20Green.svg",alt:"logo"}),Object(f.jsx)("p",{className:"Header-text",children:"Test web application"})]})}var x=n(29),p=n(83);n(63);function g(e){return new Date(e).toLocaleDateString()}function N(e){return new Date(e).toLocaleTimeString()}function S(){return(S=Object(d.a)(l.a.mark((function e(t,n){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("404"===t){e.next=6;break}return c="/data/".concat(t),e.next=4,u.a.get(c).then((function(e){if(e){var t=e.data;console.log("Successful response from backend at ".concat(c)),200===e.status&&"object"===typeof t?(n(t),console.log("patient changed")):(console.log("Error from ".concat(c,": "),t.err),n(t.err))}})).catch((function(e){console.log("Server error: ",e)}));case 4:e.next=9;break;case 6:return a="/hello",e.next=9,u.a.get(a).then((function(e){e&&(console.log("Successful response from backend at ".concat(a)),200===e.status?console.log(e.data):console.log("Error from ".concat(a,": "),e.data.err))})).catch((function(e){console.log("Server error: ",e)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(64),n(65);function w(e){var t=e.obs,n=O().patient;return Object(f.jsxs)("div",{className:"observation",children:[Object(f.jsxs)("p",{className:"observation-title",children:[t.title," :"]}),Object(f.jsx)("p",{className:"observation-description",children:function(e){if(!e)return"None";if("Z"===e[e.length-1]){var t=e;return"".concat(N(t)," - ").concat(g(t))}return"[object Object]"===e?"[Confidential Data]":e.replace(/\[redacted\]/g,n.name).split(";").join("\n")}(t.description)})]})}function y(e){for(var t,n=e.visit,c="",a=0;""===c&&a<n.length;)n[a].visit&&(c="id: ".concat(n[a].visit)),a+=1;return t=""===c?"Alert raised"===n[0].eventName?"ALERT":"Special event on the ".concat(g(n[0].timestamp)):"Visit of the ".concat(g(n[0].timestamp)),Object(f.jsxs)("div",{className:"visit-display",children:[Object(f.jsx)("div",{className:"circle border"}),Object(f.jsxs)("div",{className:"visit-container",children:[Object(f.jsxs)("div",{className:"visit-header",children:[Object(f.jsx)("p",{className:"visit-title",children:t}),Object(f.jsx)("p",{className:"id",children:c})]}),n.map((function(e){var t=e.caregiverId,n=e.timestamp,c=e.eventName,a=e.observations;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"event-head",children:["".concat(g(n)," at ").concat(N(n)," - "),"Alert raised"===c&&Object(f.jsx)("img",{src:"/warning.jpeg",alt:"Warning",height:"20",className:"warning"}),c]}),Object(f.jsx)("p",{className:"id event",children:t?"caregiver: ".concat(t):""}),Object(f.jsx)("div",{className:"circle event-position"}),Object(f.jsx)("div",{className:"event-observations",children:a&&a.map((function(e){return Object(f.jsx)(w,{obs:e},"".concat(e.title).concat(Math.random().toString()))}))})]},Math.random().toString())}))]})]})}function C(){return Object(f.jsxs)("div",{className:"load-container",children:["Fetching data",Object(f.jsx)(x.a,{})]})}function F(){var e=Object(c.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],s=O().patient,r=Object(c.useMemo)((function(){return[!0,!1,!1,!1]}),[]),o=Object(c.useState)("2019-06-06"),l=Object(i.a)(o,2),d=l[0],j=l[1],u=Object(c.useState)(),b=Object(i.a)(u,2),m=b[0],v=b[1],h=Object(c.useState)(!0),x=Object(i.a)(h,2),N=x[0],w=x[1];function F(e){r.splice(e,1,!r[e]),w(!N)}return Object(c.useEffect)((function(){a(void 0),function(e,t){S.apply(this,arguments)}(s.id,a)}),[s]),Object(c.useEffect)((function(){var e=n&&n.filter((function(e){var t=e[0],n=!r[3]||g(t.timestamp)===g(d);return void 0===t.visit?"Alert raised"===t.eventName?r[1]&&n:r[2]&&n:r[0]&&n}));v(e)}),[n,r,N,d]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"data-header",children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("p",{className:"form-text",children:"Choose which data to display:"}),Object(f.jsxs)("form",{className:"form-container",children:[Object(f.jsx)(p.a,{slider:!0,label:" Visits",defaultChecked:!0,onChange:function(){return F(0)}}),Object(f.jsx)(p.a,{toggle:!0,label:" Alert raised",onChange:function(){return F(1)}}),Object(f.jsx)(p.a,{toggle:!0,label:" No medication observation received",onChange:function(){return F(2)}}),Object(f.jsxs)("div",{className:"date-chooser",children:[Object(f.jsx)(p.a,{toggle:!0,label:" From a specific date: ",onChange:function(){return F(3)}}),Object(f.jsx)("input",{type:"date",value:d,onChange:function(e){j(e.target.value)}})]})]})]}),Object(f.jsxs)("div",{className:"patient-data",children:["Patient: ",s.name,Object(f.jsxs)("p",{className:"id",children:["Patient Id: ",s.id]})]})]}),Object(f.jsxs)("div",{className:"scroll-container",children:[Object(f.jsx)("div",{className:"timeline"}),Object(f.jsx)("div",{className:"scroll border",children:m?m.map((function(e){var t=Math.random().toString();return Object(f.jsx)(y,{visit:e},t)})):Object(f.jsx)(C,{})})]})]})}n(71);function k(){return Object(f.jsxs)("div",{className:"Footer",children:[Object(f.jsx)("p",{className:"Footer-text",children:"Fran\xe7ois Lorne"}),Object(f.jsx)("p",{className:"Footer-text",children:"Friday 26th of November 2022"}),Object(f.jsx)("p",{className:"Footer-text",children:"Stage 1 of recruitement"})]})}var E=function(){var e=O().setPatient,t=Object(c.useState)(),n=Object(i.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),o=Object(i.a)(r,2),l=o[0],d=o[1],j=Object(c.useState)(0),u=Object(i.a)(j,2),m=u[0],v=u[1];function x(t){var n=JSON.parse(t.target.id);e(n),v(n.index)}return Object(c.useEffect)((function(){!function(e,t){b.apply(this,arguments)}(s,e)}),[e]),Object(c.useEffect)((function(){return a&&d(a.map((function(e){return{index:e.index,id:e.id,name:e.name,selected:m===e.index}})))}),[a,m]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(h,{}),Object(f.jsxs)("div",{className:"body-container border",children:[Object(f.jsx)("div",{className:"top-line"}),Object(f.jsx)("div",{className:"btn-row",children:l&&l.map((function(e){return e.selected?Object(f.jsxs)("div",{className:"tab selected",id:JSON.stringify(e),children:[e.index+1,". ",e.name]},e.name):Object(f.jsxs)("button",{className:"tab",type:"button",id:JSON.stringify(e),onClick:x,children:[e.index+1,". ",e.name]},e.name)}))}),Object(f.jsx)(F,{})]}),Object(f.jsx)(k,{})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(v,{children:Object(f.jsx)(E,{})})}),document.getElementById("root")),L()}},[[72,1,2]]]);
//# sourceMappingURL=main.9cd0778c.chunk.js.map